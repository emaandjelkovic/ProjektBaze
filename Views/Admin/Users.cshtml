@model List<AccountManager.ViewModels.Admin.UserDto>
@{
    ViewData["Title"] = "Korisnici";
}

@{
    var roles = (List<AccountManager.Models.Role>)ViewBag.Roles;
}

<div class="home-hero" style="align-items:flex-start;">
    <div class="glass-table-wrap">
        <div class="home-card card-left" style="padding: 28px;">
            <h1>Korisnici</h1>
            <p>Popis svih registriranih korisnika.</p>
        </div>

        <div style="height: 16px;"></div>

        <table class="glass-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Email</th>
                    <th>Rola</th>
                    <th>Kreiran</th>
                    <th>Postojeći račun</th>
                    <th>Promijeni rolu</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var u in Model)
                {
                    <tr>
                        <td>@u.Id</td>
                        <td>@u.Email</td>
                        <td><span class="badge">@u.RoleName</span></td>
                        <td>@u.CreatedAt.ToString("dd.MM.yyyy HH:mm")</td>
                        <td>
                            @if (u.HasAccount)
                            {
                                <span class="badge">DA</span>
                            }
                            else
                            {
                                <span class="badge">NE</span>
                            }
                        </td>
                        <td>
                            <form asp-action="ToggleRole" method="post" class="d-inline">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="userId" value="@u.Id" />

                                <button type="submit"
                                        class="role-chip @(u.RoleName == "Admin" ? "role-admin" : "role-user")"
                                        title="Klikni za promjenu role">
                                    @u.RoleName
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
